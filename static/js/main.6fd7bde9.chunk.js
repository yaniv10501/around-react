(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(5),o=a.n(c),r=(a(12),a(2)),s=a(3),u=(a(13),a.p+"static/media/header-logo.4e8e0a1d.svg"),p=a(0);function l(){return Object(p.jsx)("header",{className:"header",children:Object(p.jsx)("img",{className:"header__logo",src:u,alt:"Header logo"})})}var d=a(6),h=a(7),j=new(function(){function e(t){var a=t.baseUrl,n=t.authorization;Object(d.a)(this,e),this._baseUrl=a,this._authorization=n}return Object(h.a)(e,[{key:"_checkRes",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._authorization}}).then((function(t){return e._checkRes(t)}))}},{key:"getIntialCard",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._authorization}}).then((function(t){return e._checkRes(t)}))}},{key:"setUserinfo",value:function(e){var t=this,a=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:a,about:n})}).then((function(e){return t._checkRes(e)}))}},{key:"setUserPicture",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return t._checkRes(e)}))}},{key:"addCard",value:function(e){var t=this,a=e.name,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:a,link:n})}).then((function(e){return t._checkRes(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(e){return t._checkRes(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._authorization}}).then((function(e){return t._checkRes(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(e){return t._checkRes(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",authorization:"12be1991-4f28-449f-a9a9-71d4704b25a2"});function m(e){var t=e.card,a=t.name,n=t.link,i=t.likes;return Object(p.jsxs)("li",{className:"photo",children:[Object(p.jsx)("img",{className:"photo__image",alt:a,src:n,onClick:function(){e.onCardClick(a,n)}}),Object(p.jsx)("button",{className:"photo__delete",type:"button","aria-label":"Delete"}),Object(p.jsxs)("div",{className:"photo__info",children:[Object(p.jsx)("h2",{className:"photo__title",children:a}),Object(p.jsxs)("div",{className:"photo__like-container",children:[Object(p.jsx)("button",{className:"photo__like",type:"button","aria-label":"Like"}),Object(p.jsx)("p",{className:"photo__like-count",children:i.length})]})]})]})}function b(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),i=a[0],c=a[1],o=Object(n.useState)([]),r=Object(s.a)(o,2),u=r[0],l=r[1],d=Object(n.useState)({userName:"",userDescription:"",userAvatar:""}),h=Object(s.a)(d,2),b=h[0],_=h[1];return Object(n.useEffect)((function(){Promise.all([j.getUserInfo(),j.getIntialCard()]).then((function(e){_({userName:e[0].name,userDescription:e[0].about,userAvatar:e[0].avatar}),l(e[1])})).then((function(){return c(!1)})).catch((function(e){return console.log(e)}))}),[]),Object(p.jsxs)("main",{className:"container",children:[Object(p.jsx)("div",{className:i?"spinner":"spinner spinner_hidden",children:Object(p.jsx)("i",{})}),Object(p.jsxs)("div",{className:i?"content content_hidden":"content",children:[Object(p.jsxs)("section",{className:"profile",children:[Object(p.jsx)("div",{className:"profile__edit-pic",onClick:e.onEditAvatarClick,children:Object(p.jsx)("div",{className:"profile__pic",style:{backgroundImage:"url(".concat(b.userAvatar,")")}})}),Object(p.jsxs)("div",{className:"profile__info",children:[Object(p.jsx)("h1",{className:"profile__name",id:"name",children:b.userName}),Object(p.jsx)("p",{className:"profile__description",id:"job",children:b.userDescription}),Object(p.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"Edit profile",onClick:e.onEditProfileClick})]}),Object(p.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"Add a picture",onClick:e.onAddPlaceClick})]}),Object(p.jsx)("section",{className:"photos",children:Object(p.jsx)("ul",{className:"photos__grid",children:u.map((function(t){return Object(p.jsx)(m,{card:t,onCardClick:e.onCardClick},t._id)}))})})]})]})}function _(){return Object(p.jsx)("footer",{className:"footer",children:Object(p.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Around the U.S. Yaniv Schweitzer"})})}function f(e){return Object(p.jsx)("div",{className:e.isOpen?"popup popup_type_".concat(e.name," popup_opened"):"popup popup_type_".concat(e.name),children:Object(p.jsxs)("div",{className:"popup__container",children:[Object(p.jsxs)("form",{className:"popup__form",name:e.formName,noValidate:!0,_id:"",children:[Object(p.jsx)("h2",{className:"popup__title",children:e.formTitle}),e.children,Object(p.jsx)("button",{className:"popup__save-button",type:"submit",children:e.submitTitle})]}),Object(p.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"Close",onClick:e.onClose})]})})}function O(e){var t=e.selectedCard,a=t.name,n=t.link;return Object(p.jsx)("div",{className:e.isOpen?"popup popup_type_image popup_opened":"popup popup_type_image",children:Object(p.jsxs)("div",{className:"popup__container popup__container_type_image",children:[Object(p.jsx)("img",{className:"popup__image",src:n,alt:a}),Object(p.jsx)("h2",{className:"popup__image-title",children:a}),Object(p.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"Close",onClick:e.onClose})]})})}var x=function(){var e=Object(n.useState)({name:"",link:""}),t=Object(s.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)({editInfo:!1,addPlace:!1,editAvatar:!1,imagePopup:!1}),o=Object(s.a)(c,2),u=o[0],d=o[1],h=function(){d({editInfo:!1,addPlace:!1,editAvatar:!1,imagePopup:!1}),a.name&&setTimeout((function(){i({name:"",link:""})}),300)};return Object(p.jsxs)("div",{className:"page",children:[Object(p.jsx)(l,{}),Object(p.jsx)(b,{onEditProfileClick:function(){d(Object(r.a)(Object(r.a)({},u),{},{editInfo:!0}))},onAddPlaceClick:function(){d(Object(r.a)(Object(r.a)({},u),{},{addPlace:!0}))},onEditAvatarClick:function(){d(Object(r.a)(Object(r.a)({},u),{},{editAvatar:!0}))},onCardClick:function(e,t){i({name:e,link:t}),d(Object(r.a)(Object(r.a)({},u),{},{imagePopup:!0}))}}),Object(p.jsx)(_,{}),Object(p.jsxs)(f,{name:"edit-info",formName:"editInfo",formTitle:"Edit profile",submitTitle:"Save",isOpen:u.editInfo,onClose:h,children:[Object(p.jsx)("input",{className:"popup__input popup__input_type_name",id:"name-input",type:"text",placeholder:"name",name:"name",minLength:"2",maxLength:"40",required:!0}),Object(p.jsx)("span",{className:"popup__error name-input-error"}),Object(p.jsx)("input",{className:"popup__input popup__input_type_about",id:"about-input",type:"text",placeholder:"about me",name:"job",minLength:"2",maxLength:"200",required:!0}),Object(p.jsx)("span",{className:"popup__error about-input-error"})]}),Object(p.jsxs)(f,{name:"edit-picture",formName:"editPicture",formTitle:"Change profile picture",submitTitle:"Save",isOpen:u.editAvatar,onClose:h,children:[Object(p.jsx)("input",{className:"popup__input popup__input_type_profile-picture",id:"profile-picture-input",placeholder:"profile picture url",name:"picture",type:"url",required:!0}),Object(p.jsx)("span",{className:"popup__error profile-picture-input-error"})]}),Object(p.jsxs)(f,{name:"add",formName:"add",formTitle:"New Place",submitTitle:"Create",isOpen:u.addPlace,onClose:h,children:[Object(p.jsx)("input",{className:"popup__input popup__input_type_title",id:"title-input",type:"text",placeholder:"Title",name:"title",minLength:"2",maxLength:"30",required:!0}),Object(p.jsx)("span",{className:"popup__error  title-input-error"}),Object(p.jsx)("input",{className:"popup__input popup__input_type_url",id:"url-input",type:"url",placeholder:"Image URL",name:"url",required:!0}),Object(p.jsx)("span",{className:"popup__error url-input-error"})]}),Object(p.jsx)(f,{name:"delete",formName:"delete",formTitle:"Are you sure?",submitTitle:"Yes"}),Object(p.jsx)(O,{isOpen:u.imagePopup,selectedCard:a,onClose:h})]})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,16)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),c(e),o(e)}))};o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(x,{})}),document.getElementById("root")),N()}},[[15,1,2]]]);
//# sourceMappingURL=main.6fd7bde9.chunk.js.map